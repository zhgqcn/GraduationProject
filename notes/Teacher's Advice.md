# One

1. 目前**效果差**的重要原因之一:

- 数据集不理想，即<font color='red'>LR</font>**锐度高**但是**细节差**且**噪点多（颗粒感严重）**，<font color='blue'>HR</font>**细节信息多**但较**平滑也就是模糊**。
  - 不理想的统计学解释是，分布不一致。而目前大多数超分模型的前提是LR和HR的分布一致，从而通过学习估计LR的缺失部分。
  - 很多网络学到了部分细节，但也学到了HR的平滑信息，出来结果就是模糊的

2. 拟定解决方案

- 做好预处理，如强化HR的锐度（本质上分布还是没法不一致，但可以削弱平滑信息），传统方法（比如相机里对拍摄照片的预处理，也就是，我们目前手机上拍出来的照片其实是镜头图像经大量算法去噪白平衡锐化等操作的结果）强化LR等
- 根据现有网络结构以前述理论，拼接出具有一定理论依据的网络模型。比如，加入U-net结构，先对LR降质再超分回来，目的是在基本不丢失关键信息的情况下削弱锐度（传统算法是平滑滤波，但是会丢很多细节）

3. *尝试网络模型除了训练的技巧，还要思考基于图像处理和统计学理论的预处理和网络模型，不能抓一个模型过来试一下，不行就丢掉，想碰到一个恰好对症的网络，几乎不可能。*

4. 我的工作步骤：
   - HR强化
   - LR削弱锐度
   - 结合前两种

# Two

1. 预处理的太狠
   - 红绿的比例看起来应该跟HR接近
   - 超分网络默认LR HR分布一致，直观地讲，就是LR HR看起来差不多，就是放大后LR马赛克比较严重。整个亮度、对比度都要一致
   - 不然网络会以为光线变化、对比度变化也都是要学习的内容。其实不是，网络只要学习细腻度

2. 网络深浅和宽度也可尝试调整。不建议一下就用很深的网络，先确保网络有学到东西，即有效果

3. 多看看医学图像超分的论文
   - 预处理和网络结构
   
# Three
![QQ图片20201107150854](https://tvax2.sinaimg.cn/large/005tpOh1ly1gkgmnnhcg6j31890kb0vq.jpg)
![QQ图片20201107151052](https://tva4.sinaimg.cn/large/005tpOh1ly1gkgmnujpg0j317n0e6787.jpg)
![QQ图片20201107151056](https://tva3.sinaimg.cn/large/005tpOh1ly1gkgmo1bhsjj317n0agdlj.jpg)
![QQ图片20201107151101](https://tvax1.sinaimg.cn/large/005tpOh1ly1gkgmo7jgl8j317u0c6acr.jpg)
![QQ图片20201107151104](https://tvax4.sinaimg.cn/large/005tpOh1ly1gkgmod9secj317z0dn423.jpg)

1. loss目前的改进方式有效果，一点点，在锐化上建议再强一点
2. 如果模型锐化效果不好调，就用传统算法做后处理无妨
3. 1-2两条完成就做个阶段性总结（用了什么数据，经过怎样的处理，得到怎样的结果）
4. 完成3后，剔除暗红的图，构建新数据集，试试效果
5. 完成4后，就要尝试最新模型或者关键模块嫁接到现有模型上
